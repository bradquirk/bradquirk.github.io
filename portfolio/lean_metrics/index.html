<!DOCTYPE html>
<meta charset="utf-8">
<style>
    /* set the CSS */

    body {
        font-family: 'Arial', sans-serif;
        font-size: 12px;
        font-weight: 400;
        background-color: #2E353D;
        /*        margin-top: 10px;*/
    }


    /*
.arcs {
    cursor: pointer;
}
*/

    #header {
        /*        padding: 10px 0 0 10px;*/
        font-family: "Poppins";
        color: white;
    }

    #chart {
        /*        padding: 10px 10px 10px 10px;*/
        font-family: "Arial";
    }

</style>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Brad Quirk | Lean Dashboard</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css">
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/mdb.min.css" rel="stylesheet">
    <link href="/css/style_lean_dashboard.css" rel="stylesheet">
    <!-- Hotjar Tracking Code for https://quirkules.github.io/ -->
    <script>
        (function(h, o, t, j, a, r) {
            h.hj = h.hj || function() {
                (h.hj.q = h.hj.q || []).push(arguments)
            };
            h._hjSettings = {
                hjid: 1230223,
                hjsv: 6
            };
            a = o.getElementsByTagName('head')[0];
            r = o.createElement('script');
            r.async = 1;
            r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
            a.appendChild(r);
        })(window, document, 'https://static.hotjar.com/c/hotjar-', '.js?sv=');

    </script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-50453785-4"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-50453785-4');

    </script>

</head>

<body>
    <!-- SCRIPTS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script type="/text/javascript" src="/js/mdb.js"></script>
    <script src="/js/d3.min.js"></script>
    <script src="/js/d3-color.js"></script>
    <script src="/js/d3-scale-chromatic.js"></script>
    <script src="/js/d3-interpolate.js"></script>
    <script src="/js/jquery.js"></script>

    <!-- Navbar-->
    <nav class="navbar sticky-top navbar-expand-lg navbar-dark dark-color">
        <a class="navbar-brand amber-text" href="/">
    <img src="/img/sitelogo_yellow.png" height="30" alt="logo"> 
  </a>
        <a class="navbar-brand amber-text" href="/">
    Brad Quirk
  </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="amber-text"><i
        class="fas fa-bars fa-1x"></i></span>
  </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item px-2">
                    <a class="nav-link amber-text" href="/">Home</a>
                </li>
                <li class="nav-item px-2 active">
                    <a class="nav-link amber-text" href="/portfolio/">Portfolio<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item px-2">
                    <a class="nav-link amber-text" href="/about/">About</a>
                </li>
                <li class="nav-item px-2"><a class="amber-text" href="/contact/">
                    <button class="btn btn-sm btn-outline-warning" type="button">Contact</button></a>
                </li>
            </ul>
        </div>

    </nav>
    <!-- Navbar-->

    <div class="container">
        <div class="row">
            <div class="col amber-text" id="header">
                <h1>Lean Metrics Dashboard</h1>
                <h6 class="mb-4">version 1.2</h6>
            </div>
        </div>

        <h6 class="white-text">Well-being - Pulse Survey Distribution</h6>
        <div class="row m-2">
            <div class="col" id="wellbeingChartContainer"></div>
        </div>
        <h6 class="white-text">Sustainability - Work In Progress (WIP)</h6>
        <div class="row m-2">
            <div class="col" id="wipChartContainer"></div>
        </div>
        <h6 class="white-text">Responsiveness - Cycle Time</h6>
        <div class="row m-2">
            <div class="col" id="cycleChartContainer"></div>
        </div>
        <h6 class="white-text">Productivity - Throughput</h6>
        <div class="row m-2">
            <div class="col" id="throughputChartContainer"></div>
        </div>
        <h6 class="white-text">Quality (Defects Raised vs. Resolved)</h6>
        <div class="row m-2">
            <div class="col" id="qualityChartContainer"></div>
        </div>
                <!-- Accordion card -->
        <div class="accordion md-accordion" id="accordionValue" role="tablist" aria-multiselectable="true">
            <div>
                <!-- Card header -->
                <div class="header" role="tab" id="headingOne1">
                    <a data-toggle="collapse" data-parent="#accordionValue" href="#collapseOne1" aria-expanded="true" aria-controls="collapseOne1">
                        <h4 class="my-4 amber-text">
                            The Value <i class="fas fa-angle-down rotate-icon"></i>
                        </h4>
                    </a>
                </div>
                <!-- Card body -->
                <div id="collapseOne1" class="collapse show" role="tabpanel" aria-labelledby="headingOne1" data-parent="#accordionValue">
                    <div class="white-text">
                <p>When embarking on large-scale transformation or change management programs, we want to be able to quantify and articulate our return on investment, and easily identify opportunities for continuous improvement. Several tools try to visualise this using a single metric or graph, but more often than not we end up with an oversimplified view that isn't capturing the nuance of a complex system.</p>
                <p>To rectify this we need to split 'improvement' into five customer-centric focus areas aka. the Five Pillars:</p>
                <ul>
                    <li>Responsiveness or <i>"How Fast?"</i></li>
                    <li>Productivity or <i>"How Much?"</i></li>
                    <li>Sustainability or <i>"How Maintainable?"</i></li>
                    <li>Quality or <i>"How Well?"</i></li>
                    <li>Well-being or <i>"How Are You?"</i></li>
                </ul>
                    </div>
                </div>

            </div>
        </div>
        <!-- Accordion card -->
        <!-- Accordion card -->
        <div class="accordion md-accordion" id="accordionHypothesis" role="tablist" aria-multiselectable="true">
            <div>
                <!-- Card header -->
                <div class="header" role="tab" id="headingOne2">
                    <a class="collapsed" data-toggle="collapse" data-parent="#accordionHypothesis" href="#collapseOne2" aria-expanded="false" aria-controls="collapseOne2">
                        <h4 class="my-4 amber-text">
                            Hypothesis <i class="fas fa-angle-down rotate-icon"></i>
                        </h4>
                    </a>
                </div>
                <!-- Card body -->
                <div id="collapseOne2" class="collapse" role="tabpanel" aria-labelledby="headingOne2" data-parent="#accordionHypothesis">
                    <div class="white-text">
                <p><i>I believe<br>
                    that breaking down agile performance into Five Pillars<br>
                    will enable managers and leaders to understand and articulate the progress of their transformation program<br>
                    I'll know I'm right when said leaders can use this dashboard to quantify the improvements made to date<br>
                    and identify opportunities to integrate into their roadmap.
                    </i></p>
                    </div>
                </div>

            </div>
        </div>
        <!-- Accordion card -->
        <!-- Accordion card -->
        <div class="accordion md-accordion" id="accordionMethod" role="tablist" aria-multiselectable="true">
            <div>
                <!-- Card header -->
                <div class="header" role="tab" id="headingOne3">
                    <a class="collapsed" data-toggle="collapse" data-parent="#accordionMethod" href="#collapseOne3" aria-expanded="false" aria-controls="collapseOne3">
                        <h4 class="my-4 amber-text">
                            Method <i class="fas fa-angle-down rotate-icon"></i>
                        </h4>
                    </a>
                </div>
                <!-- Card body -->
                <div id="collapseOne3" class="collapse" role="tabpanel" aria-labelledby="headingOne3" data-parent="#accordionMethod">
                    <div class="white-text">
                <ol>
                    <li>Create a short pulse survey using <a href="//www.typeform.com" target="_blank" class="amber-text">Typeform</a> to collect employee sentiment and well-being</li>
                    <li>Identify scope of analysis using JQL query in Jira, or through collating a list of boards/projects on other platforms</li>
                    <li>Extract a data set using the platform's API</li>
                    <li>Cleanse the data using a <a href="//www.knime.com/knime-software/knime-analytics-platform" target="_blank" class="amber-text">KNIME</a> script</li>
                    <li>Reorganise data to isolate each focus area and allow for bottom-up aggregation from the user story layer</li>
                    <li>Visualise the results using the <a href="//https://d3js.org/" target="_blank" class="amber-text">d3.js</a> javascript library</li>
                </ol>
                <p><small>* Note: the sizing of each user story can be calculated using lean principles (uniform sizing) or through relative estimation (non-uniform sizing)</small></p>
                    </div>
                </div>

            </div>
        </div>
        <!-- Accordion card -->
        <!-- Accordion card -->
        <div class="accordion md-accordion" id="accordionInsights" role="tablist" aria-multiselectable="true">
            <div>
                <!-- Card header -->
                <div class="header" role="tab" id="headingOne4">
                    <a class="collapsed" data-toggle="collapse" data-parent="#accordionInsights" href="#collapseOne4" aria-expanded="false" aria-controls="collapseOne4">
                        <h4 class="my-4 amber-text">
                            Insights <i class="fas fa-angle-down rotate-icon"></i>
                        </h4>
                    </a>
                </div>
                <!-- Card body -->
                <div id="collapseOne4" class="collapse" role="tabpanel" aria-labelledby="headingOne4" data-parent="#accordionInsights">
                    <div class="white-text">
                <p>After implementing the Five Pillars in several large-scale agile portfolios I was able to identify the following patterns and observations:</p>
                <ul>
                    <li>From a behavioural standpoint, there was a huge shift in conversations related to team performance. Where leaders once reduced everything to a binary conclusion (e.g. "You're too slow!") they were now discussing tradeoffs between delivering more vs. maintaining quality vs. platform stablity.</li>
                    <li>The initial concern around implementing this framework was that it wasn't prescriptive enough, i.e. the teams just wanted to be told what to measure and know what 'good' looked like. However, once they understood the flexibility of the framework and invested time in customising their own metrics the result was a holistic, fit-for-purpose suite of measures that resonated with teams and stakeholders alike.</li>
                    <li>Another interesting behaviour was the desire to compare teams. Having always advised against this practice due the unique approach each team has to their work it was fascinating to see that this competitive culture evaporated when teams felt comfortable being fully transparent and honest about their strengths and weaknesses. This in turn opened the doors for cross-domain collaboration as the squads within each domain could pinpoint exactly who they should be pairing with to knowledge share.</li>
                    <li>Regardless of the maturity of the portfolio, any significant change to a process would result in a short-term negative impact. This phenomena is similar to the <a href="//en.wikipedia.org/wiki/J_curve" target="_blank" class="amber-text">J curve effect</a> in economics, where a reduction in stability causes a shortfall before obtaining a return on investment once stability returns and the method is proven valid.</li>
                </ul>
                    </div>
                </div>

            </div>
        </div>
        <!-- Accordion card -->
        <!-- Accordion card -->
        <div class="accordion md-accordion" id="accordionConclusion" role="tablist" aria-multiselectable="true">
            <div>
                <!-- Card header -->
                <div class="header" role="tab" id="headingOne5">
                    <a class="collapsed" data-toggle="collapse" data-parent="#accordionConclusion" href="#collapseOne5" aria-expanded="false" aria-controls="collapseOne5">
                        <h4 class="my-4 amber-text">
                            Conclusion <i class="fas fa-angle-down rotate-icon"></i>
                        </h4>
                    </a>
                </div>
                <!-- Card body -->
                <div id="collapseOne5" class="collapse" role="tabpanel" aria-labelledby="headingOne5" data-parent="#accordionConclusion">
                    <div class="white-text">
                <p>By shifting away from the 'one size fits all' style of metrics and appreciating the benefits of splitting agile performance into five key focus areas, we can easily articulate the current state of a large-scale transformation. This is further enhanced by overlaying qualitative data (e.g. anecdotal evidence) to create a message that resonates with the rest of the organisation.</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Accordion card -->
        <div class="row">
            <div class="col white-text">
                <p>If you'd like to know how this visualisation could be implemented in your organisation, feel free to <a href="/contact/" class="amber-text">contact me!</a></p>
            </div>
        </div>
    </div>
        <script>
        $(function() {
            $(this).bind("contextmenu", function(e) {
                e.preventDefault();
            });
        });
    </script>
    <script>
        var dataTable, colourScheme, parseDate = d3.utcParse("%d/%m/%Y"),
            formatDate = d3.timeFormat("%Y-%W"),
            parseTime = d3.timeParse("%Y-%W"),
            cleanDate = d3.timeFormat("%e %b '%y"),
            emptyDate = formatDate(parseDate(0));
        d3.csv("data.csv", function(t, e) {
            if (t) throw t;
            e.forEach(t => {
                t.date = parseDate(t.Date), t.cycle15th = +t["Cycle Time 15th"], t.cycle50th = +t["Cycle Time 50th"], t.cycle85th = +t["Cycle Time 85th"], t.throughput = +t.Throughput, t.throughputAvg = +t["Throughput Avg"], t.wip = +t.WIP, t.defectsRaised = +t["Defects Raised"], t.defectsResolved = +t["Defects Resolved"], t.wellbeingBad = parseFloat(t["Wellbeing Negative"]), t.wellbeingOkay = parseFloat(t["Wellbeing Neutral"]), t.wellbeingGood = parseFloat(t["Wellbeing Positive"])
            });
            var a, r, l = {
                top: 20,
                right: 20,
                bottom: 30,
                left: 40
            };
            a = $("#cycleChartContainer").innerWidth() - l.left - l.right - parseFloat($(".container").css("padding-left")) - parseFloat($(".container").css("padding-right")), r = .6 * $(window).innerHeight() * .25 - l.top - l.bottom;
            var o = d3.select("#cycleChartContainer").append("svg").attr("id", "cycleChart").attr("width", a + l.left + l.right).attr("height", r + l.top + l.bottom).append("g").attr("transform", "translate(" + l.left + "," + l.top + ")"),
                s = d3.select("#throughputChartContainer").append("svg").attr("id", "throughputChart").attr("width", a + l.left + l.right).attr("height", r + l.top + l.bottom).append("g").attr("transform", "translate(" + l.left + "," + l.top + ")"),
                d = d3.select("#wipChartContainer").append("svg").attr("id", "wipChart").attr("width", a + l.left + l.right).attr("height", r + l.top + l.bottom).append("g").attr("transform", "translate(" + l.left + "," + l.top + ")"),
                n = d3.select("#qualityChartContainer").append("svg").attr("id", "qualityChart").datum(e).attr("width", a + l.left + l.right).attr("height", r + l.top + l.bottom).append("g").attr("transform", "translate(" + l.left + "," + l.top + ")"),
                c = d3.select("#wellbeingChartContainer").append("svg").attr("id", "wellbeingChart").datum(e).attr("width", a + l.left + l.right).attr("height", r + l.top + l.bottom).append("g").attr("transform", "translate(" + l.left + "," + l.top + ")"),
                y = o.append("defs").append("linearGradient").attr("id", "cycleGradient").attr("x1", "0%").attr("x2", "0%").attr("y1", "0%").attr("y2", "100%");
            y.append("stop").attr("class", "bad").attr("offset", "0%"), y.append("stop").attr("class", "okay").attr("offset", "50%"), y.append("stop").attr("class", "good").attr("offset", "100%");
            var p = s.append("defs").append("linearGradient").attr("id", "throughputGradient").attr("x1", "0%").attr("x2", "0%").attr("y1", "0%").attr("y2", "100%");
            p.append("stop").attr("class", "good").attr("offset", "0%"), p.append("stop").attr("class", "okay").attr("offset", "50%"), p.append("stop").attr("class", "bad").attr("offset", "100%");
            var h = d.append("defs").append("linearGradient").attr("id", "wipGradient").attr("x1", "0%").attr("x2", "0%").attr("y1", "0%").attr("y2", "100%");
            h.append("stop").attr("class", "bad").attr("offset", "0%"), h.append("stop").attr("class", "okay").attr("offset", "50%"), h.append("stop").attr("class", "good").attr("offset", "100%");
            var x = c.append("defs").append("linearGradient").attr("id", "wellbeingGradient").attr("x1", "0%").attr("x2", "0%").attr("y1", "0%").attr("y2", "100%");
            x.append("stop").attr("class", "good").attr("offset", "0%"), x.append("stop").attr("class", "okay").attr("offset", "50%"), x.append("stop").attr("class", "bad").attr("offset", "100%");
            var g = {
                good: "#2EB86B",
                okay: "#E8BF61",
                bad: "#D85D6C"
            };
            d3.selectAll(".good").style("stop-color", g.good), d3.selectAll(".okay").style("stop-color", g.okay), d3.selectAll(".bad").style("stop-color", g.bad);
            var u = d3.scaleTime().range([0, a]),
                f = d3.scaleLinear().range([r, 0]),
                v = d3.line().x(function(t) {
                    return u(t.date)
                }).y(function(t) {
                    return f(t.cycle50th)
                }),
                w = d3.area().x(function(t) {
                    return u(t.date)
                }).y0(function(t) {
                    return f(t.cycle15th)
                }).y1(function(t) {
                    return f(t.cycle85th)
                });
            u.domain(d3.extent(e, function(t) {
                return t.date
            })), f.domain([0, d3.max(e, function(t) {
                return t.cycle85th
            })]), o.append("path").data([e]).attr("class", "line").attr("d", w).style("fill", "grey").style("opacity", .3).style("stroke", "none");
            var m = o.append("path").data([e]).attr("class", "line").attr("d", v).style("fill", "none").style("stroke", "url(#cycleGradient)").style("stroke-width", "4px");
            o.append("g").attr("class", "axis").attr("transform", "translate(0," + r + ")").call(d3.axisBottom(u)), o.append("g").attr("class", "axis").call(d3.axisLeft(f).ticks(5));
            var B = d3.scaleBand().range([0, a]).padding(.1),
                b = d3.scaleTime().range([0, a]),
                T = d3.scaleLinear().range([r, 0]);
            B.domain(e.map(function(t) {
                return t.date
            })), b.domain(d3.extent(e, function(t) {
                return t.date
            })), T.domain([0, d3.max(e, function(t) {
                return t.throughput
            })]);
            var k = d3.line().x(function(t) {
                return b(t.date)
            }).y(function(t) {
                return T(t.throughputAvg)
            });
            s.selectAll(".bar").data(e).enter().append("rect").attr("class", "bar").attr("x", function(t) {
                return B(t.date)
            }).attr("width", B.bandwidth()).attr("y", function(t) {
                return T(t.throughput)
            }).attr("height", function(t) {
                return r - T(t.throughput)
            }).style("opacity", .3).style("fill", "grey");
            var A = s.append("path").data([e]).attr("class", "line").attr("d", k).style("fill", "none").style("stroke", "url(#throughputGradient)").style("stroke-width", "4px");
            s.append("g").attr("class", "axis").attr("transform", "translate(0," + r + ")").call(d3.axisBottom(b)), s.append("g").attr("class", "axis").call(d3.axisLeft(T).ticks(5));
            var R = d3.scaleTime().range([0, a]),
                H = d3.scaleLinear().range([r, 0]),
                C = d3.line().x(function(t) {
                    return R(t.date)
                }).y(function(t) {
                    return H(t.wip)
                }),
                D = d3.area().x(function(t) {
                    return R(t.date)
                }).y0(function(t) {
                    return H(0)
                }).y1(function(t) {
                    return H(t.wip)
                });
            R.domain(d3.extent(e, function(t) {
                return t.date
            })), H.domain([0, d3.max(e, function(t) {
                return t.wip
            })]), d.append("path").data([e]).attr("class", "line").attr("d", D).style("fill", "grey").style("opacity", .3).style("stroke", "none");
            var q = d.append("path").data([e]).attr("class", "line").attr("d", C).style("fill", "none").style("stroke", "url(#wipGradient)").style("stroke-width", "4px");
            d.append("g").attr("class", "axis").attr("transform", "translate(0," + r + ")").call(d3.axisBottom(R)), d.append("g").attr("class", "axis").call(d3.axisLeft(H).ticks(5));
            var L = d3.scaleTime().range([0, a]),
                G = d3.scaleLinear().range([r, 0]),
                O = d3.line().x(function(t) {
                    return L(t.date)
                }).y(function(t) {
                    return G(t.defectsRaised)
                }),
                P = d3.line().x(function(t) {
                    return L(t.date)
                }).y(function(t) {
                    return G(t.defectsResolved)
                });
            L.domain(d3.extent(e, function(t) {
                return t.date
            })), G.domain([0, d3.max(e, t => Math.max(t.defectsRaised, t.defectsResolved))]);
            var F = d3.area().x(function(t) {
                return L(t.date)
            }).y1(function(t) {
                return G(t.defectsRaised)
            });
            n.append("clipPath").attr("id", "clip-below").append("path").attr("d", F.y0(r)), n.append("clipPath").attr("id", "clip-above").append("path").attr("d", F.y0(0)), n.append("path").attr("class", "area above").attr("clip-path", "url(#clip-above)").attr("d", F.y0(function(t) {
                return G(t.defectsResolved)
            })).style("opacity", .3).style("fill", g.good), n.append("path").attr("class", "area below").attr("clip-path", "url(#clip-below)").attr("d", F).style("opacity", .3).style("fill", g.bad);
            var W = n.append("path").data([e]).attr("class", "line").attr("d", O).style("stroke", g.bad).style("fill", "none").style("stroke-width", "4px"),
                M = n.append("path").data([e]).attr("class", "line").attr("d", P).style("stroke", g.good).style("fill", "none").style("stroke-width", "4px");
            n.append("g").attr("class", "axis").attr("transform", "translate(0," + r + ")").call(d3.axisBottom(L)), n.append("g").attr("class", "axis").call(d3.axisLeft(G).ticks(5));
            var E = d3.scaleBand().range([0, a]).padding(.1),
                S = d3.scaleTime().range([0, a]),
                N = d3.scaleLinear().range([r, 0]);
            E.domain(e.map(function(t) {
                return t.date
            })), S.domain(d3.extent(e, function(t) {
                return t.date
            })), N.domain([-1, 1]);
            var Y = d3.area().x(function(t) {
                    return S(t.date)
                }).y0(function(t) {
                    return N(t.wellbeingOkay / 2)
                }).y1(function(t) {
                    return N(t.wellbeingGood + t.wellbeingOkay / 2)
                }),
                I = d3.area().x(function(t) {
                    return S(t.date)
                }).y0(function(t) {
                    return N(-t.wellbeingOkay / 2)
                }).y1(function(t) {
                    return N(t.wellbeingOkay / 2)
                }),
                U = d3.area().x(function(t) {
                    return S(t.date)
                }).y1(function(t) {
                    return N(-t.wellbeingOkay / 2)
                }).y0(function(t) {
                    return N(-(t.wellbeingBad + t.wellbeingOkay / 2))
                }),
                X = d3.line().x(function(t) {
                    return S(t.date)
                }).y(function(t) {
                    return N(t.wellbeingGood + t.wellbeingOkay / 2)
                }),
                j = d3.line().x(function(t) {
                    return S(t.date)
                }).y(function(t) {
                    return N(0)
                }),
                z = d3.line().x(function(t) {
                    return S(t.date)
                }).y(function(t) {
                    return N(-(t.wellbeingBad + t.wellbeingOkay / 2))
                });
            c.append("path").data([e]).attr("class", "line").attr("d", I).style("fill", "grey").style("fill-opacity", .3).style("stroke", "grey").style("stroke-width", "2px").style("stroke-opacity", 1), c.append("path").data([e]).attr("class", "line").attr("d", Y).style("fill", g.good).style("fill-opacity", .3).style("stroke", g.good).style("stroke-width", "2px").style("stroke-opacity", 1), c.append("path").data([e]).attr("class", "line").attr("d", U).style("fill", g.bad).style("fill-opacity", .3).style("stroke", g.bad).style("stroke-width", "2px").style("stroke-opacity", 1);
            var J = c.append("path").data([e]).attr("class", "line").attr("d", X).style("fill", "none"),
                K = c.append("path").data([e]).attr("class", "line").attr("d", j).style("fill", "none"),
                Q = c.append("path").data([e]).attr("class", "line").attr("d", z).style("fill", "none");
            c.append("g").attr("class", "axis").attr("transform", "translate(0," + r / 2 + ")").call(d3.axisBottom(S).ticks(0)).style("stroke-dasharray", "2, 2"), c.append("g").attr("class", "axis").attr("transform", "translate(0," + r + ")").call(d3.axisBottom(S)), c.append("g").attr("class", "axis").call(d3.axisLeft(N).tickFormat(t => d3.format(".0%")(Math.abs(t))).ticks(5));
            var V = o.append("g").attr("class", "mouse-over-effects"),
                Z = (V.append("line").attr("class", "mouse-line").style("stroke-width", "2px").style("opacity", "0").style("stroke", "white"), V.append("circle").attr("id", "cycleCircle").attr("class", "hoverCircle").attr("r", 7).style("stroke-width", "2px").style("opacity", "0"), V.selectAll("rect").data(["HoverRect", "DateRect"]).enter().append("rect").attr("id", t => "cycle" + t).attr("class", "hoverBackground"), V.selectAll("text").data(["HoverText", "DateText"]).enter().append("text").attr("id", t => "cycle" + t).attr("class", "hoverText").attr("fill", "white"), s.append("g").attr("class", "mouse-over-effects")),
                _ = (Z.append("line").attr("class", "mouse-line").style("stroke-width", "2px").style("opacity", "0").style("stroke", "white"), Z.append("circle").attr("id", "throughputCircle").attr("class", "hoverCircle").attr("r", 7).style("stroke-width", "2px").style("opacity", "0"), Z.selectAll("rect").data(["HoverRect", "DateRect"]).enter().append("rect").attr("id", t => "throughput" + t).attr("class", "hoverBackground"), Z.selectAll("text").data(["HoverText", "DateText"]).enter().append("text").attr("id", t => "throughput" + t).attr("class", "hoverText").attr("fill", "white"), d.append("g").attr("class", "mouse-over-effects")),
                tt = (_.append("line").attr("class", "mouse-line").style("stroke-width", "2px").style("opacity", "0").style("stroke", "white"), _.append("circle").attr("id", "wipCircle").attr("class", "hoverCircle").attr("r", 7).style("stroke-width", "2px").style("opacity", "0"), _.selectAll("rect").data(["HoverRect", "DateRect"]).enter().append("rect").attr("id", t => "wip" + t).attr("class", "hoverBackground"), _.selectAll("text").data(["HoverText", "DateText"]).enter().append("text").attr("id", t => "wip" + t).attr("class", "hoverText").attr("fill", "white"), n.append("g").attr("class", "mouse-over-effects")),
                et = (tt.append("line").attr("class", "mouse-line").style("stroke-width", "2px").style("opacity", "0").style("stroke", "white"), tt.append("circle").attr("id", "qualityRaisedCircle").attr("class", "hoverCircle").attr("r", 7).style("stroke-width", "2px").style("opacity", "0"), tt.selectAll("rect").data(["qualityRaisedHoverRect", "qualityResolvedHoverRect", "qualityRaisedDateRect"]).enter().append("rect").attr("id", t => t).attr("class", "hoverBackground"), tt.selectAll("text").data(["qualityRaisedHoverText", "qualityResolvedHoverText", "qualityRaisedDateText"]).enter().append("text").attr("id", t => t).attr("class", "hoverText").attr("fill", "white"), tt.append("circle").attr("id", "qualityResolvedCircle").attr("class", "hoverCircle").attr("r", 7).style("stroke-width", "2px").style("opacity", "0"), c.append("g").attr("class", "mouse-over-effects"));
            et.append("line").attr("class", "mouse-line").style("stroke-width", "2px").style("opacity", "0").style("stroke", "white"), et.append("circle").attr("id", "wellbeingGoodCircle").attr("class", "hoverCircle").attr("r", 7).style("stroke-width", "2px").style("opacity", "0"), et.selectAll("rect").data(["wellbeingGoodHoverRect", "wellbeingOkayHoverRect", , "wellbeingBadHoverRect", "wellbeingDateRect"]).enter().append("rect").attr("id", t => t).attr("class", "hoverBackground"), et.selectAll("text").data(["wellbeingGoodHoverText", "wellbeingOkayHoverText", "wellbeingBadHoverText", "wellbeingDateText"]).enter().append("text").attr("id", t => t).attr("class", "hoverText").attr("fill", "white"), et.append("circle").attr("id", "wellbeingOkayCircle").attr("class", "hoverCircle").attr("r", 7).style("stroke-width", "2px").style("opacity", "0"), et.append("circle").attr("id", "wellbeingBadCircle").attr("class", "hoverCircle").attr("r", 7).style("stroke-width", "2px").style("opacity", "0");

            function at(t, o, s) {
                var d = document.getElementById("cycleChartContainer").offsetLeft,
                    n = m.node(),
                    c = n.getTotalLength(),
                    y = A.node(),
                    p = y.getTotalLength(),
                    h = q.node(),
                    x = h.getTotalLength(),
                    g = W.node(),
                    v = g.getTotalLength(),
                    w = M.node(),
                    B = w.getTotalLength(),
                    k = J.node(),
                    C = k.getTotalLength(),
                    D = K.node(),
                    G = D.getTotalLength(),
                    O = Q.node(),
                    P = O.getTotalLength(),
                    F = d3.bisector(t => t.date).right,
                    E = (Math.max(c, p, x, v, B), Math.max(d3.select("text#cycleHoverText").node().getBBox().width, d3.select("text#throughputHoverText").node().getBBox().width, d3.select("text#wipHoverText").node().getBBox().width, d3.select("text#qualityRaisedHoverText").node().getBBox().width, d3.select("text#wellbeingGoodHoverText").node().getBBox().width, d3.select("text#wellbeingOkayHoverText").node().getBBox().width, d3.select("text#wellbeingBadHoverText").node().getBBox().width)),
                    N = d3.scaleSequential().interpolator(rt(d3.interpolateRgb, [s.good, s.okay, s.bad])).domain([f(d3.min(e, t => t.cycle50th)), f(d3.max(e, t => t.cycle50th))]),
                    Y = d3.scaleSequential().interpolator(rt(d3.interpolateRgb, [s.bad, s.okay, s.good])).domain([T(d3.min(e, t => +t.throughputAvg)), T(d3.max(e, t => +t.throughputAvg))]),
                    I = d3.scaleSequential().interpolator(rt(d3.interpolateRgb, [s.good, s.okay, s.bad])).domain([H(d3.min(e, t => +t.wip)), H(d3.max(e, t => +t.wip))]);
                d3.selectAll(".mouse-line").attr("x1", t[0]).attr("x2", t[0]).attr("y1", r).attr("y2", 0);
                var U = d3.event.pageX - d - l.left - parseFloat($(".container").css("padding-left")),
                    X = o[F(o, u.invert(U))],
                    j = o[F(o, b.invert(U))],
                    z = o[F(o, R.invert(U))],
                    V = o[F(o, L.invert(U))],
                    Z = o[F(o, L.invert(U))],
                    _ = o[F(o, S.invert(U))],
                    tt = o[F(o, S.invert(U))],
                    et = o[F(o, S.invert(U))];
                for (d3.select("text#cycleDateText").style("opacity", 1).attr("x", U).attr("y", r + l.bottom / 2 + 5).attr("dy", "0.1em").attr("text-anchor", "middle").text(cleanDate(X.date)), d3.select("rect#cycleDateRect").style("opacity", 1).attr("x", U).attr("y", r + l.bottom / 2 + 5).attr("width", d3.select("text#cycleDateText").node().getBBox().width + 2).attr("height", d3.select("text#cycleDateText").node().getBBox().height + 2).attr("transform", "translate(" + -d3.select("text#cycleDateText").node().getBBox().width / 2 + ",-15)"), d3.select("text#throughputDateText").style("opacity", 1).attr("x", U).attr("y", r + l.bottom / 2 + 5).attr("dy", "0.1em").attr("text-anchor", "middle").text(cleanDate(j.date)), d3.select("rect#throughputDateRect").style("opacity", 1).attr("x", U).attr("y", r + l.bottom / 2 + 5).attr("width", d3.select("text#throughputDateText").node().getBBox().width + 2).attr("height", d3.select("text#throughputDateText").node().getBBox().height + 2).attr("transform", "translate(" + -d3.select("text#throughputDateText").node().getBBox().width / 2 + ",-15)"), d3.select("text#wipDateText").style("opacity", 1).attr("x", U).attr("y", r + l.bottom / 2 + 5).attr("dy", "0.1em").attr("text-anchor", "middle").text(cleanDate(z.date)), d3.select("rect#wipDateRect").style("opacity", 1).attr("x", U).attr("y", r + l.bottom / 2 + 5).attr("width", d3.select("text#wipDateText").node().getBBox().width + 2).attr("height", d3.select("text#wipDateText").node().getBBox().height + 2).attr("transform", "translate(" + -d3.select("text#wipDateText").node().getBBox().width / 2 + ",-15)"), d3.select("text#qualityRaisedDateText").style("opacity", 1).attr("x", U).attr("y", r + l.bottom / 2 + 5).attr("dy", "0.1em").attr("text-anchor", "middle").text(cleanDate(V.date)), d3.select("rect#qualityRaisedDateRect").style("opacity", 1).attr("x", U).attr("y", r + l.bottom / 2 + 5).attr("width", d3.select("text#qualityRaisedDateText").node().getBBox().width + 2).attr("height", d3.select("text#qualityRaisedDateText").node().getBBox().height + 2).attr("transform", "translate(" + -d3.select("text#qualityRaisedDateText").node().getBBox().width / 2 + ",-15)"), d3.select("text#wellbeingDateText").style("opacity", 1).attr("x", U).attr("y", r + l.bottom / 2 + 5).attr("dy", "0.1em").attr("text-anchor", "middle").text(cleanDate(_.date)), d3.select("rect#wellbeingDateRect").style("opacity", 1).attr("x", U).attr("y", r + l.bottom / 2 + 5).attr("width", d3.select("text#wellbeingDateText").node().getBBox().width + 2).attr("height", d3.select("text#wellbeingDateText").node().getBBox().height + 2).attr("transform", "translate(" + -d3.select("text#wellbeingDateText").node().getBBox().width / 2 + ",-15)"), i = U; i < c; i += 1) {
                    var at = n.getPointAtLength(i);
                    if (at.x >= U) break
                }
                if (a - at.x - E < 30) var lt = -15 - d3.select("text#cycleHoverText").node().getBBox().width;
                else lt = 10;
                for (d3.select("circle#cycleCircle").style("fill", N(at.y)).style("stroke", "white").style("opacity", 1).attr("cx", U - 1).attr("cy", at.y), d3.select("text#cycleHoverText").style("opacity", 1).attr("x", U).attr("y", at.y).attr("dx", lt).attr("dy", "0.25em").text("Average: " + X.cycle50th + " Bus. Days"), d3.select("rect#cycleHoverRect").style("opacity", 1).attr("x", U).attr("y", at.y).attr("width", d3.select("text#cycleHoverText").node().getBBox().width + 2).attr("height", d3.select("text#cycleHoverText").node().getBBox().height + 2).attr("transform", "translate(" + lt + ",-12.5)"), i = U; i < p; i += 1) {
                    var ot = y.getPointAtLength(i);
                    if (ot.x >= U) break
                }
                if (a - ot.x - E < 30) var it = -15 - d3.select("text#throughputHoverText").node().getBBox().width;
                else it = 10;
                for (d3.select("circle#throughputCircle").style("fill", Y(ot.y)).style("stroke", "white").style("opacity", 1).attr("cx", U).attr("cy", ot.y), d3.select("text#throughputHoverText").style("opacity", 1).attr("x", U).attr("y", ot.y).attr("dx", it).attr("dy", "0.25em").text("Average: " + j.throughputAvg + " User Stories / Week"), d3.select("rect#throughputHoverRect").style("opacity", 1).attr("x", U).attr("y", ot.y).attr("width", d3.select("text#throughputHoverText").node().getBBox().width + 2).attr("height", d3.select("text#throughputHoverText").node().getBBox().height + 2).attr("transform", "translate(" + it + ",-12.5)"), i = U; i < x; i += 1) {
                    var st = h.getPointAtLength(i);
                    if (st.x >= U) break
                }
                if (a - st.x - E < 30) var dt = -15 - d3.select("text#wipHoverText").node().getBBox().width;
                else dt = 10;
                for (d3.select("circle#wipCircle").style("fill", I(st.y)).style("stroke", "white").style("opacity", 1).attr("cx", U - 1).attr("cy", st.y), d3.select("text#wipHoverText").style("opacity", 1).attr("x", U).attr("y", st.y).attr("dx", dt).attr("dy", "0.25em").text("Total: " + z.wip + " User Stories"), d3.select("rect#wipHoverRect").style("opacity", 1).attr("x", U).attr("y", st.y).attr("width", d3.select("text#wipHoverText").node().getBBox().width + 2).attr("height", d3.select("text#wipHoverText").node().getBBox().height + 2).attr("transform", "translate(" + dt + ",-12.5)"), i = U; i < v; i += 1) {
                    var nt = g.getPointAtLength(i);
                    if (nt.x >= U) break
                }
                if (a - nt.x - E < 30) var ct = -15 - d3.select("text#qualityRaisedHoverText").node().getBBox().width;
                else ct = 10;
                for (i = U; i < B; i += 1) {
                    var yt = w.getPointAtLength(i);
                    if (yt.x >= U) break
                }
                if (a - yt.x - E < 30) var pt = -15 - d3.select("text#qualityResolvedHoverText").node().getBBox().width;
                else pt = 10;
                if (yt.y - nt.y < d3.select("text#qualityResolvedHoverText").node().getBBox().height + 2) var ht = -(d3.select("text#qualityResolvedHoverText").node().getBBox().height + 2) + yt.y - nt.y;
                else ht = 0;
                for (d3.select("circle#qualityRaisedCircle").style("fill", "#D85D6C").style("stroke", "white").style("opacity", 1).attr("cx", U - 1).attr("cy", nt.y), d3.select("text#qualityRaisedHoverText").style("opacity", 1).attr("x", U).attr("y", nt.y).attr("dx", ct).attr("dy", ht).text("Raised: " + V.defectsRaised), d3.select("rect#qualityRaisedHoverRect").style("opacity", 1).attr("x", U).attr("y", nt.y).attr("width", d3.select("text#qualityRaisedHoverText").node().getBBox().width + 2).attr("height", d3.select("text#qualityRaisedHoverText").node().getBBox().height + 2).attr("transform", "translate(" + ct + "," + (-15.5 + ht) + ")"), d3.select("circle#qualityResolvedCircle").style("fill", "#2EB86B").style("stroke", "white").style("opacity", 1).attr("cx", U - 1).attr("cy", yt.y), d3.select("text#qualityResolvedHoverText").style("opacity", 1).attr("x", U).attr("y", yt.y).attr("dx", pt).attr("dy", "0.25em").text("Resolved: " + Z.defectsResolved), d3.select("rect#qualityResolvedHoverRect").style("opacity", 1).attr("x", U).attr("y", yt.y).attr("width", d3.select("text#qualityResolvedHoverText").node().getBBox().width + 2).attr("height", d3.select("text#qualityResolvedHoverText").node().getBBox().height + 2).attr("transform", "translate(" + pt + ",-12.5)"), i = U; i < C; i += 1) {
                    var xt = k.getPointAtLength(i);
                    if (xt.x >= U) break
                }
                if (a - xt.x - E < 30) var gt = -15 - d3.select("text#wellbeingGoodHoverText").node().getBBox().width;
                else gt = 10;
                for (i = U; i < G; i += 1) {
                    var ut = D.getPointAtLength(i);
                    if (ut.x >= U) break
                }
                if (a - ut.x - E < 30) var ft = -15 - d3.select("text#wellbeingOkayHoverText").node().getBBox().width;
                else ft = 10;
                for (i = U; i < P; i += 1) {
                    var vt = O.getPointAtLength(i);
                    if (vt.x >= U) break
                }
                if (a - vt.x - E < 30) var wt = -15 - d3.select("text#wellbeingBadHoverText").node().getBBox().width;
                else wt = 10;
                if (ut.y - xt.y < d3.select("text#wellbeingOkayHoverText").node().getBBox().height + 2) var mt = -(d3.select("text#wellbeingOkayHoverText").node().getBBox().height + 2) + ut.y - xt.y;
                else mt = 0;
                if (vt.y - ut.y < d3.select("text#wellbeingOkayHoverText").node().getBBox().height + 2) var Bt = d3.select("text#wellbeingOkayHoverText").node().getBBox().height + 2 + ut.y - vt.y;
                else Bt = 0;
                d3.select("circle#wellbeingGoodCircle").style("fill", "#2EB86B").style("stroke", "white").style("opacity", 1).attr("cx", U - 1).attr("cy", xt.y), d3.select("text#wellbeingGoodHoverText").style("opacity", 1).attr("x", U).attr("y", xt.y).attr("dx", gt).attr("dy", mt).text("Positive: " + d3.format(".0%")(tt.wellbeingGood)), d3.select("rect#wellbeingGoodHoverRect").style("opacity", 1).attr("x", U).attr("y", xt.y).attr("width", d3.select("text#wellbeingGoodHoverText").node().getBBox().width + 2).attr("height", d3.select("text#wellbeingGoodHoverText").node().getBBox().height + 2).attr("transform", "translate(" + gt + "," + (-15.5 + mt) + ")"), d3.select("circle#wellbeingOkayCircle").style("fill", "grey").style("stroke", "white").style("opacity", 1).attr("cx", U - 1).attr("cy", ut.y), d3.select("text#wellbeingOkayHoverText").style("opacity", 1).attr("x", U).attr("y", ut.y).attr("dx", ft).attr("dy", "0.25em").text("Neutral: " + d3.format(".0%")(tt.wellbeingOkay)), d3.select("rect#wellbeingOkayHoverRect").style("opacity", 1).attr("x", U).attr("y", ut.y).attr("width", d3.select("text#wellbeingOkayHoverText").node().getBBox().width + 2).attr("height", d3.select("text#wellbeingOkayHoverText").node().getBBox().height + 2).attr("transform", "translate(" + ft + ",-12.5)"), d3.select("circle#wellbeingBadCircle").style("fill", "#D85D6C").style("stroke", "white").style("opacity", 1).attr("cx", U - 1).attr("cy", vt.y), d3.select("text#wellbeingBadHoverText").style("opacity", 1).attr("x", U).attr("y", vt.y).attr("dx", wt).attr("dy", Bt).text("Negative: " + d3.format(".0%")(et.wellbeingBad)), d3.select("rect#wellbeingBadHoverRect").style("opacity", 1).attr("x", U).attr("y", vt.y).attr("width", d3.select("text#wellbeingBadHoverText").node().getBBox().width + 2).attr("height", d3.select("text#wellbeingBadHoverText").node().getBBox().height + 2).attr("transform", "translate(" + wt + "," + (-15.5 + Bt) + ")")
            }

            function rt(t, e) {
                for (var a = 0, r = e.length - 1, l = e[0], o = new Array(r < 0 ? 0 : r); a < r;) o[a] = t(l, l = e[++a]);
                return function(t) {
                    var e = Math.max(0, Math.min(r - 1, Math.floor(t *= r)));
                    return o[e](t - e)
                }
            }
            V.append("rect").attr("width", a).attr("height", r).attr("fill", "none").attr("pointer-events", "all").on("mouseout", function() {
                d3.selectAll(".mouse-line").style("opacity", "0"), d3.selectAll(".hoverCircle").style("opacity", "0"), d3.selectAll(".hoverBackground").style("opacity", "0"), d3.selectAll(".hoverText").style("opacity", "0")
            }).on("mouseover", function() {
                d3.selectAll(".mouse-line").style("opacity", "1"), d3.selectAll(".hoverCircle").style("opacity", "1"), d3.selectAll(".hoverBackground").style("opacity", "1"), d3.selectAll(".hoverText").style("opacity", "1")
            }).on("mousemove", function() {
                at(d3.mouse(this), e, g)
            }), Z.append("rect").attr("width", a).attr("height", r).attr("fill", "none").attr("pointer-events", "all").on("mouseout", function() {
                d3.selectAll(".mouse-line").style("opacity", "0"), d3.selectAll(".hoverCircle").style("opacity", "0"), d3.selectAll(".hoverBackground").style("opacity", "0"), d3.selectAll(".hoverText").style("opacity", "0")
            }).on("mouseover", function() {
                d3.selectAll(".mouse-line").style("opacity", "1"), d3.selectAll(".hoverCircle").style("opacity", "1"), d3.selectAll(".hoverBackground").style("opacity", "1"), d3.selectAll(".hoverText").style("opacity", "1")
            }).on("mousemove", function() {
                at(d3.mouse(this), e, g)
            }), _.append("rect").attr("width", a).attr("height", r).attr("fill", "none").attr("pointer-events", "all").on("mouseout", function() {
                d3.selectAll(".mouse-line").style("opacity", "0"), d3.selectAll(".hoverCircle").style("opacity", "0"), d3.selectAll(".hoverBackground").style("opacity", "0"), d3.selectAll(".hoverText").style("opacity", "0")
            }).on("mouseover", function() {
                d3.selectAll(".mouse-line").style("opacity", "1"), d3.selectAll(".hoverCircle").style("opacity", "1"), d3.selectAll(".hoverBackground").style("opacity", "1"), d3.selectAll(".hoverText").style("opacity", "1")
            }).on("mousemove", function() {
                at(d3.mouse(this), e, g)
            }), tt.append("rect").attr("width", a).attr("height", r).attr("fill", "none").attr("pointer-events", "all").on("mouseout", function() {
                d3.selectAll(".mouse-line").style("opacity", "0"), d3.selectAll(".hoverCircle").style("opacity", "0"), d3.selectAll(".hoverBackground").style("opacity", "0"), d3.selectAll(".hoverText").style("opacity", "0")
            }).on("mouseover", function() {
                d3.selectAll(".mouse-line").style("opacity", "1"), d3.selectAll(".hoverCircle").style("opacity", "1"), d3.selectAll(".hoverBackground").style("opacity", "1"), d3.selectAll(".hoverText").style("opacity", "1")
            }).on("mousemove", function() {
                at(d3.mouse(this), e, g)
            }), et.append("rect").attr("width", a).attr("height", r).attr("fill", "none").attr("pointer-events", "all").on("mouseout", function() {
                d3.selectAll(".mouse-line").style("opacity", "0"), d3.selectAll(".hoverCircle").style("opacity", "0"), d3.selectAll(".hoverBackground").style("opacity", "0"), d3.selectAll(".hoverText").style("opacity", "0")
            }).on("mouseover", function() {
                d3.selectAll(".mouse-line").style("opacity", "1"), d3.selectAll(".hoverCircle").style("opacity", "1"), d3.selectAll(".hoverBackground").style("opacity", "1"), d3.selectAll(".hoverText").style("opacity", "1")
            }).on("mousemove", function() {
                at(d3.mouse(this), e, g)
            })
        });

    </script>
</body>
